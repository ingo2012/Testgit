/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 * http://www.rgagnon.com/javadetails/java-0596.html 
 */

package com.utils;

import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

public class EpromUtils {

  static final byte[] HEX_CHAR_TABLE = {
    (byte)'0', (byte)'1', (byte)'2', (byte)'3',
    (byte)'4', (byte)'5', (byte)'6', (byte)'7',
    (byte)'8', (byte)'9', (byte)'a', (byte)'b',
    (byte)'c', (byte)'d', (byte)'e', (byte)'f'
  };

  public byte[] prom = new byte [128];

  /**
   *
   * @param raw
   * @return
   * @throws UnsupportedEncodingException
   */
  public  String getHexString(byte[] raw)
    throws UnsupportedEncodingException
  {
    byte[] hex = new byte[2 * raw.length];
    int index = 0;

    for (byte b : raw) {
      int v = b & 0xFF;
      hex[index++] = HEX_CHAR_TABLE[v >>> 4];
      hex[index++] = HEX_CHAR_TABLE[v & 0xF];
    }

    return new String(hex, "ASCII");
  }

   public  String getHexStringByte(byte raw)
    throws UnsupportedEncodingException
  {
    byte[] hex = new byte[2];
    int index = 0;

    //for (byte b : raw) {
      int v = raw & 0xFF;
      hex[index++] = HEX_CHAR_TABLE[v >>> 4];
      hex[index++] = HEX_CHAR_TABLE[v & 0xF];
    //}

    return new String(hex, "ASCII");
  }

   /**
    * Init the prom Array
    * @param promSize
    */
  public void initProm(int promSize)  {
      prom = new byte [promSize];
  }

  /**
   * 
   */
  public  void readFile() {
   //byte[] getBinaryFileContent("meineDatei");
   BufferedInputStream in = null;
   try {
          in = new BufferedInputStream(new FileInputStream("manifest.mf"));
          byte[] ioBuf = new byte[128];
          int bytesRead;
          while ((bytesRead = in.read(ioBuf)) != -1) {
           System.out.println("Read="+bytesRead);
           // System.out.println(StringUtils.getHexString(ioBuf));
           prom = ioBuf;
          }
          in.close();
                // return bs.toByteArray();
   } catch (IOException ex) {
                System.out.println("Fehler"+ex);
               }
  }

    private String asciiToHex(String ascii){
        StringBuilder hex = new StringBuilder();

        for (int i=0; i < ascii.length(); i++) {
            System.out.println("i="+i+ " Val"+ascii.charAt(i));
            hex.append(Integer.toHexString(ascii.charAt(i)));
        }

        System.out.println("Value of ascii " + ascii + ": " + hex.toString());

        return hex.toString();
    }

  /**
   *
   * @param args
   * @throws Exception
   */
  public static void main(String args[]) throws Exception{
    byte[] byteArray = {
      (byte)255, (byte)254, (byte)253,
      (byte)252, (byte)251, (byte)250
    };
    //readFile();
    //System.out.println(StringUtils.getHexString(byteArray));

    /*
     * output :
     *   fffefdfcfbfa
     */

  }
}
